# 기능 명세서: 반복 일정 표시

## 📋 기본 정보

- **Task ID**: task-20251031-173200
- **작성일**: 2025-10-31
- **작성자**: Feature Designer Agent
- **우선순위**: 중간
- **복잡도**: 쉬움 (easy)

---

## 🎯 기능 개요

캘린더 뷰에서 반복 일정(매일, 매주, 매월, 매년)을 일반 일정과 시각적으로 구분하여 표시하는 기능입니다. 반복 일정에는 반복 유형을 나타내는 아이콘이 표시되어 사용자가 한눈에 반복 일정임을 알 수 있도록 합니다.

---

## 👤 사용자 스토리

**As a** 캘린더 사용자  
**I want** 캘린더에서 반복 일정을 아이콘으로 구분하여 볼 수 있다  
**So that** 일반 일정과 반복 일정을 쉽게 구별하고, 반복 패턴을 빠르게 파악할 수 있다

### 상세 시나리오

1. **주간/월간 뷰에서 반복 일정 확인**

   - 사용자: 캘린더에서 다음 주 일정을 확인한다
   - 표시: 매주 반복되는 회의는 순환 아이콘(🔄)이 표시된다
   - 효과: 일반 일정과 반복 일정을 즉시 구분할 수 있다

2. **반복 유형 빠른 파악**
   - 사용자: 일정 목록을 스크롤하며 확인한다
   - 표시: 각 반복 유형에 맞는 아이콘이 일정 제목 옆에 표시된다
   - 효과: 아이콘만으로 반복 패턴을 파악할 수 있다

---

## ✅ 인수 조건 (Acceptance Criteria)

### 반복 일정 아이콘 표시

1. [ ] 반복 일정(`repeat.type !== 'none'`)에는 반복 아이콘이 표시된다
2. [ ] 반복 유형별로 다른 시각적 표시를 사용한다:
   - 매일(daily): "🔄" 또는 순환 아이콘
   - 매주(weekly): "📅" 또는 주간 아이콘
   - 매월(monthly): "📆" 또는 월간 아이콘
   - 매년(yearly): "🎂" 또는 연간 아이콘
3. [ ] 일반 일정(`repeat.type === 'none'`)에는 아이콘이 표시되지 않는다
4. [ ] 아이콘은 일정 제목 앞 또는 옆에 표시된다

### UI/UX 요구사항

5. [ ] 아이콘 크기는 16x16px 또는 적절한 크기로 통일된다
6. [ ] 아이콘 색상은 테마 색상과 조화를 이룬다
7. [ ] 반응형 디자인에서도 아이콘이 정상적으로 표시된다
8. [ ] 아이콘에 마우스 hover 시 툴팁으로 반복 정보가 표시된다
   - 예: "매주 반복", "매월 반복", "2주마다 반복"

### 접근성

9. [ ] 아이콘에 `aria-label` 속성이 포함되어 스크린 리더가 읽을 수 있다
10. [ ] 아이콘만으로 정보를 전달하지 않고 텍스트 대체 수단도 제공한다

### 성능

11. [ ] 아이콘 렌더링으로 인한 성능 저하가 없다
12. [ ] 많은 수의 반복 일정이 있어도 부드럽게 표시된다

---

## 🔧 기술적 요구사항

### 관련 컴포넌트/파일

#### 신규 생성

- `src/components/RepeatEventIcon.tsx` - 반복 일정 아이콘 컴포넌트

  - Props: `{ repeatType: RepeatType, interval?: number }`
  - 반복 유형에 따른 아이콘 렌더링
  - 툴팁 표시 기능

- `src/utils/repeatEventDisplay.ts` - 반복 일정 표시 유틸 함수
  - `getRepeatIconLabel(repeatType: RepeatType, interval: number): string` - 툴팁 텍스트 생성
  - `getRepeatIcon(repeatType: RepeatType): ReactNode` - 아이콘 반환

#### 수정 필요

- `src/App.tsx` - 일정 목록 표시 부분에 아이콘 컴포넌트 추가

### 필요한 타입 정의

기존 타입 활용 (수정 불필요):

```typescript
// src/types.ts (이미 정의됨)
export type RepeatType = 'none' | 'daily' | 'weekly' | 'monthly' | 'yearly';

export interface Event {
  id: string;
  title: string;
  repeat: RepeatInfo;
  // ... 기타 필드
}
```

### 컴포넌트 명세

#### RepeatEventIcon 컴포넌트

```typescript
interface RepeatEventIconProps {
  repeatType: RepeatType;
  interval?: number;
  size?: 'small' | 'medium' | 'large';
}

export function RepeatEventIcon({
  repeatType,
  interval = 1,
  size = 'small',
}: RepeatEventIconProps): ReactNode {
  // 반복 유형에 따른 아이콘 렌더링
  // 툴팁 표시
}
```

---

## 🎨 UI/UX 요구사항

### 레이아웃

- 아이콘은 일정 제목 왼쪽에 배치
- 아이콘과 제목 사이 간격: 4px
- 세로 정렬: center

### 아이콘 디자인

- Material-UI Icons 사용 (프로젝트 일관성)
- 크기: 16x16px (small), 20x20px (medium)
- 색상: `theme.palette.primary.main` 또는 테마 색상
- 아이콘 옵션:
  - daily: `<RepeatIcon />` 또는 `<AutorenewIcon />`
  - weekly: `<EventRepeatIcon />` 또는 `<CalendarTodayIcon />`
  - monthly: `<CalendarMonthIcon />`
  - yearly: `<CakeIcon />` 또는 `<EventIcon />`

### 인터랙션

- **Hover**: 툴팁 표시, 아이콘 약간 확대 (scale 1.1)
- **Focus**: 키보드 접근 시 포커스 표시
- **툴팁 내용**: "{interval}주마다 반복", "매월 반복", "매년 반복"

### 접근성

- `aria-label`: "반복 일정: 매주"
- `role="img"`: 아이콘을 이미지로 인식
- 툴팁은 `aria-describedby`로 연결

---

## ⚠️ 제약사항 및 엣지 케이스

### 제약사항

1. Material-UI 아이콘 라이브러리만 사용 (일관성 유지)
2. 반복 일정이 아닌 경우(`repeat.type === 'none'`) 아이콘을 표시하지 않음
3. 아이콘은 순수하게 시각적 보조 수단 (정보는 텍스트로도 제공)

### 엣지 케이스

1. **interval이 1이 아닌 경우**

   - 예: 2주마다, 3일마다
   - 예상 동작: 툴팁에 "2주마다 반복" 표시

2. **매우 긴 일정 제목**

   - 아이콘이 제목과 함께 줄바꿈되지 않도록 처리
   - 예상 동작: 아이콘은 첫 줄에 고정

3. **다크 모드**

   - 아이콘 색상이 배경과 대비되어야 함
   - 예상 동작: 테마에 따라 자동으로 색상 조정

4. **모바일 뷰**

   - 작은 화면에서도 아이콘이 명확하게 보여야 함
   - 예상 동작: 적절한 크기 유지, 터치 영역 확보

5. **반복 종료일이 지난 일정**
   - 과거의 반복 일정도 아이콘 표시
   - 예상 동작: 동일하게 아이콘 표시 (과거 일정 시각화는 별도 기능)

---

## 📦 의존성

### 선행 작업

- 반복 일정 생성 기능 (task-20251031-000000) - ✅ 완료됨
- `Event` 타입에 `repeat` 필드 포함 - ✅ 이미 존재

### 영향받는 영역

- 일정 목록 렌더링 성능 (미미한 영향)
- 캘린더 뷰 레이아웃 (아이콘 공간 확보)

---

## 📝 추가 노트

### 개발 시 고려사항

1. **아이콘 선택**: Material-UI Icons에서 직관적인 아이콘 선택
2. **성능 최적화**: React.memo 사용으로 불필요한 리렌더링 방지
3. **재사용성**: 다른 뷰(주간, 월간, 목록)에서도 동일한 컴포넌트 사용
4. **테마 통합**: Material-UI 테마 시스템 활용

### 향후 확장 가능성

- 클릭 시 반복 일정 상세 정보 표시
- 반복 일정 일괄 편집/삭제 기능 연동
- 반복 패턴 시각화 (예: 캘린더에 표시)

---

## ✔️ 검토 체크리스트

- [x] 사용자 스토리가 명확한가? - 반복 일정을 시각적으로 구분
- [x] 인수 조건이 측정 가능한가? - 12개의 구체적인 조건
- [x] 엣지 케이스를 충분히 고려했는가? - 5가지 엣지 케이스 정의
- [x] 기존 코드와의 충돌은 없는가? - 기존 타입 활용, 새 컴포넌트 추가
- [x] 접근성 요구사항을 포함했는가? - aria-label, role, 툴팁 명시
- [x] 구체적인 입력값과 결과값 예시가 포함되었는가? - 아이콘, 툴팁 예시
- [x] 문서가 계층화되어 읽기 쉬운가? - 섹션별로 명확히 구분
- [x] 새로운 기능이 임의로 추가되지 않았는가? - 요구사항에만 집중
